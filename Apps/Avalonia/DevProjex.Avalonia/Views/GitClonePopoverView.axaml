<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:DevProjex.Avalonia.ViewModels"
             x:Class="DevProjex.Avalonia.Views.GitClonePopoverView"
             x:DataType="vm:MainWindowViewModel">
  <Border Classes="theme-popover"
          Padding="16"
          Width="420"
          MinWidth="360">
    <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto">
      <!-- Header with close button -->
      <Grid ColumnDefinitions="*,Auto">
        <TextBlock Text="{Binding GitCloneTitle}"
                   FontSize="16"
                   FontWeight="SemiBold" />
        <Button Grid.Column="1"
                Name="CloseButton"
                Content="âœ•"
                Classes="menu-icon-button"
                Padding="4"
                Click="OnClose"
                IsVisible="{Binding !GitCloneInProgress}" />
      </Grid>

      <!-- Description (visible when not in progress) -->
      <TextBlock Grid.Row="1"
                 Text="{Binding GitCloneDescription}"
                 Margin="0,12,0,8"
                 TextWrapping="Wrap"
                 FontSize="13"
                 Opacity="0.8"
                 IsVisible="{Binding !GitCloneInProgress}" />

      <!-- URL Input (visible when not in progress) -->
      <TextBox Grid.Row="2"
               Name="UrlTextBox"
               Text="{Binding GitCloneUrl, Mode=TwoWay}"
               Watermark="{Binding GitCloneUrlPlaceholder}"
               Margin="0,0,0,16"
               IsVisible="{Binding !GitCloneInProgress}"
               KeyDown="OnUrlKeyDown" />

      <!-- Progress section (visible when in progress) -->
      <StackPanel Grid.Row="2"
                  Margin="0,12,0,16"
                  IsVisible="{Binding GitCloneInProgress}">
        <TextBlock Text="{Binding GitCloneStatus}"
                   FontSize="13"
                   Margin="0,0,0,8" />
        <ProgressBar IsIndeterminate="True"
                     Height="4" />
      </StackPanel>

      <!-- Buttons -->
      <StackPanel Grid.Row="3"
                  Orientation="Horizontal"
                  HorizontalAlignment="Right"
                  Spacing="8">
        <Button Content="{Binding DialogOK}"
                Classes="primary-action"
                Click="OnStartClone"
                IsVisible="{Binding !GitCloneInProgress}"
                IsEnabled="{Binding GitCloneUrl.Length}" />
        <Button Content="{Binding DialogCancel}"
                Click="OnCancel" />
      </StackPanel>
    </Grid>
  </Border>
</UserControl>
